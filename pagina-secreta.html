<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Página Inicial - Biblioteca (Logado)</title>
  <link rel="stylesheet" href="/pagina-secreta.css" />

  <!-- Fonte Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />

  <style>
    body, button, select, input, h1, h3, p, a {
      font-family: 'Poppins', sans-serif !important;
      color: white;
      margin: 0;
      padding: 0;
    }

    body {
      background: black;
      overflow-x: hidden;
      position: relative;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }

    #bg-canvas {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      z-index: 1;
      pointer-events: none;
      display: block;
    }

    nav {
      z-index: 10;
      background: rgba(0,0,0,0.85);
      padding: 10px 20px;
      display: flex;
      justify-content: center;
      gap: 30px;
      position: fixed;
      top: 0;
      width: 100%;
      box-shadow: 0 2px 8px rgba(0,0,0,0.7);
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 25px;
      padding: 0;
      margin: 0;
    }
    nav ul li a {
      color: white;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.1rem;
      transition: color 0.3s;
    }
    nav ul li a:hover {
      color: #f4c542;
    }

    #search-form {
      position: relative;
      z-index: 10;
      flex-grow: 1;
      max-width: 600px;
      margin: 70px auto 40px auto; /* deixa espaço para nav fixa no topo */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 0 20px;
    }

    #titulo-pric {
      font-weight: 600;
      font-size: 2.5rem;
      margin-bottom: 20px;
      color: white;
    }

    form {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }

    form select {
      padding: 8px 14px;
      font-size: 1.1rem;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      min-width: 200px;
    }
    form button.botao {
      background: #f4c542;
      border: none;
      padding: 10px 20px;
      font-weight: 600;
      cursor: pointer;
      border-radius: 6px;
      transition: background 0.3s;
      font-size: 1.1rem;
      min-width: 120px;
    }
    form button.botao:hover {
      background: #d1a92d;
    }

    main {
      position: relative;
      z-index: 10;
      flex-grow: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 50vh;
      /* conteúdo do sistema solar fica aqui */
    }

    footer {
      background: rgba(0,0,0,0.8);
      padding: 30px 20px;
      z-index: 10;
      position: relative;
      width: 100%;
      color: white;
      box-sizing: border-box;
    }

    footer h1 {
      font-weight: 600;
      font-size: 2rem;
      margin-bottom: 18px;
      text-align: center;
    }

    footer ul {
      list-style: none;
      display: flex;
      gap: 20px;
      padding: 0;
      margin: 0 0 20px 0;
      overflow-x: auto;
      scrollbar-width: thin;
      scrollbar-color: #f4c542 transparent;
    }
    footer ul::-webkit-scrollbar {
      height: 8px;
    }
    footer ul::-webkit-scrollbar-track {
      background: transparent;
    }
    footer ul::-webkit-scrollbar-thumb {
      background-color: #f4c542;
      border-radius: 4px;
    }

    footer ul li {
      flex: 0 0 auto;
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
      overflow: hidden;
      width: 260px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    footer ul li:hover {
      transform: scale(1.05);
    }
    .company-box {
      display: flex;
      gap: 12px;
      padding: 12px;
    }
    .company-box img {
      width: 60px;
      height: 80px;
      object-fit: cover;
      border-radius: 4px;
    }
    .company-info h3 {
      margin: 0;
      font-weight: 600;
      font-size: 1.1rem;
      color: white;
    }
    .company-info p {
      margin: 2px 0 0 0;
      font-size: 0.9rem;
      color: #ddd;
    }
    .locality p {
      padding: 0 12px 10px 12px;
      font-size: 0.85rem;
      color: #ccc;
    }
    .job-type {
      padding: 0 12px 12px 12px;
    }
    .job-type span {
      background: #f4c542;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
      font-size: 0.8rem;
      color: black;
    }

    .btnjobs-container {
      text-align: center;
    }
    .btn-jobs {
      background: #f4c542;
      padding: 10px 22px;
      color: black;
      font-weight: 600;
      text-decoration: none;
      border-radius: 6px;
      transition: background 0.3s ease;
      display: inline-block;
    }
    .btn-jobs:hover {
      background: #d1a92d;
    }
  </style>
</head>
<body>
  <canvas id="bg-canvas"></canvas>

  <nav>
    <ul>
      <li><a href="/home-page-logado/home-page-logado.html">Início</a></li>
      <li><a href="/home-page/login/cadastro/cadastro-livors/cadastro-livors.html">Cadastro de Livros</a></li>
      <li><a href="/home-page/login/cadastro/editora/editora.html">Cadastro de Editora</a></li>
      <li><a href="/home-page/login/cadastro/cadastro-emprestimo/cadastro-emprestimo.html">Cadastro de Empréstimo</a></li>
      <li><a href="#" id="logoutButton">Logout</a></li>
    </ul>
  </nav>

  <div id="search-form">
    <h1 id="typewriter">Explorando o conhecimento, uma página de cada vez</h1>
    <form id="searchForm">
      <select name="category" id="category" required>
        <option value="">Selecione uma categoria</option>
        <option value="aluno">Aluno</option>
        <option value="professor">Professor</option>
        <option value="livro">Livros</option>
        <option value="reserva">Reserva</option>
        <option value="emprestimo">Empréstimo</option>
      </select>
      <button type="submit" class="botao">Pesquisar</button>
    </form>
  </div>

  <main>
    <!-- sistema solar fica aqui -->
  </main>

  <footer>
    <h1>Livros mais pesquisados</h1>
    <ul>
      <li>
        <a href="#" class="clickarea" data-livro="Monte dos ventos uivantes">
          <div class="company-box">
            <img src="/home-page/imagens/livro.webp" alt="Monte dos ventos uivantes" />
            <div class="company-info">
              <h3>Monte dos ventos uivantes</h3>
              <p>Emily Brontë</p>
            </div>
          </div>
          <div class="locality">
            <p>Amor, vingança, obsessão.</p>
          </div>
          <div class="job-type">
            <span class="clt">tragédia</span>
          </div>
        </a>
      </li>
      <li>
        <a href="#" class="clickarea" data-livro="O homem mais rico da Babilônia">
          <div class="company-box">
            <img src="/home-page/imagens/OHomemMaisRicoDaBabilonia.webp" alt="O homem mais rico da Babilônia" />
            <div class="company-info">
              <h3>O homem mais rico da Babilônia</h3>
              <p>George Samuel Clason</p>
            </div>
          </div>
          <div class="locality">
            <p>Sabedoria financeira, prosperidade</p>
          </div>
          <div class="job-type">
            <span class="pj">Financeiro</span>
          </div>
        </a>
      </li>
      <li>
        <a href="#" class="clickarea" data-livro="Meu porto seguro">
          <div class="company-box">
            <img src="/home-page/imagens/porto.jpeg" alt="Meu porto seguro" />
            <div class="company-info">
              <h3>Meu porto seguro</h3>
              <p>Mithiele Silva</p>
            </div>
          </div>
          <div class="locality">
            <p>Superação, amor, recomeços.</p>
          </div>
          <div class="job-type">
            <span class="hf">Romance</span>
          </div>
        </a>
      </li>
      <li>
        <a href="#" class="clickarea" data-livro="Meditações">
          <div class="company-box">
            <img src="/home-page/imagens/MarcoAurelio.webp" alt="Meditações" />
            <div class="company-info">
              <h3>Meditações</h3>
              <p>Marco Aurélio</p>
            </div>
          </div>
          <div class="locality">
            <p>Reflexão, sabedoria, estoicismo.</p>
          </div>
          <div class="job-type">
            <span class="pj">Filosofia</span>
          </div>
        </a>
      </li>
    </ul>
    <div class="btnjobs-container">
      <a href="/home-page/livros/tabela-livros.html" class="btn-jobs">Ver mais livros</a>
    </div>
  </footer>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.0/build/three.min.js"></script>

<script>
  const text = [
    "Explorando o conhecimento,",  // primeira linha
    "uma página de cada vez."       // segunda linha
  ];

  const speed = 50;
  let lineIndex = 0;
  let charIndex = 0;

  function typeEffect() {
    const container = document.getElementById("typewriter");

    if (lineIndex < text.length) {
      // Se terminou de digitar uma linha, insere a quebra e vai pra próxima
      if (charIndex === text[lineIndex].length) {
        if (lineIndex === 0) {
          container.innerHTML += "<br>"; // quebra de linha depois da 1ª linha
        }
        lineIndex++;
        charIndex = 0;
        setTimeout(typeEffect, speed); // pequena pausa antes de continuar
        return;
      }

      // Digita letra por letra
      container.innerHTML += text[lineIndex].charAt(charIndex);
      charIndex++;
      setTimeout(typeEffect, speed);
    }
  }

  // Limpa antes de começar
  document.getElementById("typewriter").innerHTML = "";
  typeEffect();


  const canvas = document.getElementById('bg-canvas');
  const renderer = new THREE.WebGLRenderer({ canvas, alpha: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  renderer.setClearColor(0x000000, 0); // fundo transparente

  const scene = new THREE.Scene();

  const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
  camera.position.set(50, 40, 50);
  camera.lookAt(0, 0, 0);

  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);

  const pointLight = new THREE.PointLight(0xffffff, 1);
  pointLight.position.set(0, 40, 40);
  scene.add(pointLight);

  // ----- Estrelas Piscando -----
  const starCount = 500;
  const starGeometry = new THREE.BufferGeometry();
  const starPositions = new Float32Array(starCount * 3);
  const starAlphas = new Float32Array(starCount);

  for (let i = 0; i < starCount; i++) {
    starPositions[i * 3] = (Math.random() - 0.5) * 200;
    starPositions[i * 3 + 1] = (Math.random() - 0.5) * 100 + 10;
    starPositions[i * 3 + 2] = (Math.random() - 0.5) * 200;
    starAlphas[i] = Math.random();
  }

  starGeometry.setAttribute('position', new THREE.BufferAttribute(starPositions, 3));

  const starMaterial = new THREE.PointsMaterial({
    color: 0xffffff,
    size: 0.5,
    transparent: true,
    opacity: 1,
    depthWrite: false,
  });

  const stars = new THREE.Points(starGeometry, starMaterial);
  scene.add(stars);

  // ----- Sistema Solar -----
  const solarSystem = new THREE.Group();
  scene.add(solarSystem);

  const sol = new THREE.Mesh(
    new THREE.SphereGeometry(5, 32, 32),
    new THREE.MeshBasicMaterial({ color: 0xffd500 })
  );
  solarSystem.add(sol);

  const planetData = [
    { name: "Mercúrio", size: 0.7, distance: 8, color: 0xbfbfbf, speed: 0.04 },
    { name: "Vênus", size: 1.3, distance: 11, color: 0xe0c097, speed: 0.015 },
    { name: "Terra", size: 1.4, distance: 15, color: 0x2266ff, speed: 0.01 },
    { name: "Marte", size: 1.1, distance: 19, color: 0xff6f61, speed: 0.008 },
    { name: "Júpiter", size: 3, distance: 25, color: 0xf5d2a0, speed: 0.005 },
    { name: "Saturno", size: 2.5, distance: 31, color: 0xfff1aa, speed: 0.003 },
  ];

  const planets = [];

  planetData.forEach(data => {
    // Orbitas
    const orbit = new THREE.RingGeometry(data.distance - 0.05, data.distance + 0.05, 64);
    const orbitMat = new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide, transparent: true, opacity: 0.2 });
    const orbitMesh = new THREE.Mesh(orbit, orbitMat);
    orbitMesh.rotation.x = Math.PI / 2;
    solarSystem.add(orbitMesh);

    // Planetas
    const planet = new THREE.Mesh(
      new THREE.SphereGeometry(data.size, 24, 24),
      new THREE.MeshStandardMaterial({ color: data.color })
    );
    planet.userData = { distance: data.distance, speed: data.speed, angle: Math.random() * Math.PI * 2 };
    solarSystem.add(planet);
    planets.push(planet);

    // Anel de Saturno
    if (data.name === "Saturno") {
      const ring = new THREE.Mesh(
        new THREE.RingGeometry(3, 4, 32),
        new THREE.MeshBasicMaterial({ color: 0xcccc99, side: THREE.DoubleSide, transparent: true, opacity: 0.5 })
      );
      ring.rotation.x = Math.PI / 2;
      planet.add(ring);
    }
  });

  solarSystem.position.y = 3;

  window.addEventListener('resize', () => {
    const width = window.innerWidth;
    const height = window.innerHeight;
    renderer.setSize(width, height);
    camera.aspect = width / height;
    camera.updateProjectionMatrix();
  });

  function animate() {
    requestAnimationFrame(animate);

    // Brilho das estrelas (ai papai)
    starMaterial.opacity = 0.5 + Math.sin(Date.now() * 0.002) * 0.4;

    // Movimento dos planetas
    planets.forEach(planet => {
      planet.userData.angle += planet.userData.speed;
      planet.position.x = Math.cos(planet.userData.angle) * planet.userData.distance;
      planet.position.z = Math.sin(planet.userData.angle) * planet.userData.distance;
    });

    renderer.render(scene, camera);
  }
  animate();

  // ----------- Eventos de Navegação -----------
  document.getElementById('logoutButton')?.addEventListener('click', e => {
    e.preventDefault();
    localStorage.removeItem('usuarioLogado');
    window.location.href = '/home-page/hmpg.html';
  });

  document.getElementById('searchForm')?.addEventListener('submit', e => {
    e.preventDefault();
    const categoria = document.getElementById('category').value;
    let paginaDestino = '';
    switch (categoria) {
      case 'aluno': paginaDestino = '/home-page/alunos/tabela-alunos.html'; break;
      case 'professor': paginaDestino = '/home-page/professores/tabela-professor.html'; break;
      case 'livro': paginaDestino = '/home-page/livros/tabela-livros.html'; break;
      case 'reserva': paginaDestino = '/home-page/reservas/tabela-reservas.html'; break;
      case 'emprestimo': paginaDestino = '/home-page/emprestimos/tabela-emprestimos.html'; break;
      default: alert('Categoria inválida!'); return;
    }
    window.location.href = `${paginaDestino}?categoria=${encodeURIComponent(categoria)}`;
  });

  document.querySelectorAll('a.clickarea[data-livro]')?.forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      const livro = link.getAttribute('data-livro');
      window.location.href = `/home-page/livros/tabela-livros.html?livro=${encodeURIComponent(livro)}`;
    });
  });
</script>


</body>
</html>
